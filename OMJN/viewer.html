<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>OMJN — Viewer</title>
  <link rel="stylesheet" href="./app.css"/>
</head>
<body style="margin:0;">
  <div class="viewerRoot" id="root">
    <div class="viewerBg" id="bg"></div>
    <!-- Start transition banner (Splash → LIVE) -->
    <div class="vStartBanner" id="startBanner" aria-hidden="true">
      <div class="vStartBannerInner">
        <div class="vStartSmall">NOW PERFORMING</div>
        <div class="vStartName" id="startBannerName">—</div>
      </div>
    </div>

    <!-- Sponsor bug overlay (absolute; does not affect layout) -->
    <div class="vSponsorLayer" id="sponsorLayer" aria-hidden="true" style="display:none;">
      <div class="vSponsorBug posTR" id="sponsorBug">
        <img id="sponsorImg" alt="" />
      </div>
    </div>

    <div class="viewerOverlay" id="overlay" style="display:none;">
        <div class="vCard" id="vMainCard">
            <div class="small" id="nowLabel">NOW PERFORMING</div>
            <h1 class="vNowName" id="nowName">—</h1>

            <div class="vTimer mono" id="timer">0:00</div>

            <div class="vStateRow">
                <span class="vChip good" id="chipState">LIVE</span>
                <span class="vChip" id="chipType">Standard</span>
                <span class="vChip" id="chipOver" style="display:none;">Overtime +0:00</span>
                <span class="vChip warn" id="chipWarn" style="display:none;">Wrap it up</span>
                <span class="vChip final" id="chipFinal" style="display:none;">Final 30 sec</span>
            </div>

            <!-- Next/On Deck (LIVE only) -->
            <div class="vNextDeckRow" id="liveNextDeck">
              <div class="vNextDeckCell">
                <div class="small">Next Up</div>
                <div class="vNextDeckName" id="liveNextUp">—</div>
              </div>
              <div class="vNextDeckCell right">
                <div class="small">On Deck</div>
                <div class="vNextDeckName" id="liveOnDeck">—</div>
              </div>
            </div>



            


        </div>

      <div class="vMedia" id="vMedia">
        <div class="vMediaBox" id="mediaBox">
          <div class="small" id="mediaEmpty">No image / QR for this performer</div>
          <img id="mediaImg" alt="" style="display:none;"/>
        </div>
        <div class="vCard" id="donationCard" style="padding:18px 20px;">
          <div class="small">Website / Socials</div>
          <div style="font-size:22px; font-weight:850; word-break:break-word;" id="donationText">—</div>
          <!--<div class="small" style="margin-top:8px; opacity:.8;">Tip: upload a QR image on the operator page for clean scanning.</div>-->
        </div>
      </div>

      <!-- LIVE-only mic visualizer (mirrored vertical bars) -->
      <div class="vVizWrap" id="vVizWrap" style="display:none;">
        <canvas id="vViz" aria-label="Audio visualizer"></canvas>
      </div>
    </div>

    <!-- Setup-only button (shown on SPLASH when visualizer is enabled but mic isn't granted yet) -->
    <button class="btn small vMicEnable" id="btnVizMic" type="button" style="display:none;">Enable Mic Visualizer</button>

    <!-- Splash overlay -->
    <div class="vSplashInfo" id="splashInfo">
      <div class="vCard vSplashCard">
        <h3>Next Up</h3>
        <p class="who" id="sNext">TBD</p>
        <div class="sub" id="sNextSub">Sign ups open</div>
      </div>
      <div class="vCard vSplashCard">
        <h3>On Deck</h3>
        <p class="who" id="sDeck">TBD</p>
        <div class="sub" id="sDeckSub">Get ready</div>
      </div>

      <div class="vCard vBandCard">
        <h3>House Band</h3>
        <div class="vBandLine" id="hbLineup"></div>
      </div>
    </div>

    <!-- House Band footer during LIVE (single-line bar) -->
    <div class="vLiveFooterBar" id="liveFooterBar" style="display:none;">
      <span class="vFooterBand">
        <span class="vFooterBandTitle">House Band</span>
        <span class="vFooterBandLine" id="hbLiveLineup"></span>
      </span>
    </div>

  </div>

  <script src="./shared.js"></script>
  <script src="./viewer.js"></script>
</body>
</html>

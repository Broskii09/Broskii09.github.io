<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Bingo Caller Board</title>
  <!-- Bootstrap 5 CSS -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
  />
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      background-color: #f8f9fa; /* Light grey background */
    }
    .table tbody tr td {
      vertical-align: middle; 
      /* Ensures numbers are centered vertically */
    }
    .bingo-letter-cell {
      font-weight: bold;
      font-size: 1.5rem;
      width: 80px;
      /* First column for letter */
    }
    .bingo-number-btn {
      width: 100%;
      min-width: 60px;
      height: 60px;
      font-size: 1rem;
      /* Adjust for comfortable tapping on tablet */
    }
    .called {
      background-color: #007bff !important;  /* Called = Blue background */
      color: #fff !important;                /* White text */
    }
    .offcanvas-body .form-label {
      font-weight: 600;
    }
  </style>
</head>
<body>

  <!-- Top Bar -->
  <div class="container-fluid bg-primary text-white p-3">
    <div class="d-flex justify-content-between align-items-center">
      <!-- Button to open offcanvas settings -->
      <button
        class="btn btn-outline-light"
        type="button"
        data-bs-toggle="offcanvas"
        data-bs-target="#offcanvasSettings"
        aria-controls="offcanvasSettings"
      >
        Open Settings
      </button>

      <!-- Last Called Display -->
      <div id="lastCalledDisplay" class="fs-4 fw-bold mb-0">
        Last Called: None
      </div>
    </div>
  </div>

  <!-- Main Content: Bingo Board Table -->
  <div class="container-fluid py-3" style="overflow-x:auto;">
    <table class="table table-bordered text-center align-middle">
      <tbody id="bingoTableBody"></tbody>
    </table>
  </div>

  <!-- Offcanvas (Hidden Menu) -->
  <div
    class="offcanvas offcanvas-start"
    tabindex="-1"
    id="offcanvasSettings"
    aria-labelledby="offcanvasSettingsLabel"
  >
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="offcanvasSettingsLabel">Game Settings</h5>
      <button
        type="button"
        class="btn-close"
        data-bs-dismiss="offcanvas"
        aria-label="Close"
      ></button>
    </div>
    <div class="offcanvas-body">
      <!-- Example settings -->
      <div class="mb-3">
        <label for="roundNumber" class="form-label">Round Number</label>
        <input
          type="number"
          class="form-control"
          id="roundNumber"
          placeholder="1"
        />
      </div>
      <div class="mb-3">
        <label for="prizePot" class="form-label">Prize Pot ($)</label>
        <input
          type="number"
          class="form-control"
          id="prizePot"
          placeholder="500"
        />
      </div>
      <hr/>
      <h6>Additional Options</h6>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" id="autoAdvance" />
        <label class="form-check-label" for="autoAdvance">
          Auto-advance next call (for demonstration)
        </label>
      </div>
    </div>
  </div>

  <!-- Bootstrap 5 JS Bundle -->
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
  ></script>

  <script>
    // Bingo columns with their respective number ranges
    const columns = [
      { letter: 'B', start: 1, end: 15 },
      { letter: 'I', start: 16, end: 30 },
      { letter: 'N', start: 31, end: 45 },
      { letter: 'G', start: 46, end: 60 },
      { letter: 'O', start: 61, end: 75 }
    ];

    const bingoTableBody = document.getElementById('bingoTableBody');
    const lastCalledDisplay = document.getElementById('lastCalledDisplay');

    // Keep track of last called numbers (up to 3)
    let lastCalledNumbers = [];

    // Build rows: each row = letter + 15 numbers
    columns.forEach(col => {
      // Create a row
      const row = document.createElement('tr');

      // First cell: The Bingo letter
      const letterCell = document.createElement('td');
      letterCell.className = 'bingo-letter-cell';
      letterCell.innerText = col.letter;
      row.appendChild(letterCell);

      // Next 15 cells: The numbers
      for (let num = col.start; num <= col.end; num++) {
        const td = document.createElement('td');
        const btn = document.createElement('button');
        btn.className = 'btn btn-outline-primary bingo-number-btn';
        btn.textContent = num;
        // Toggle called state
        btn.onclick = () => toggleCalled(btn, col.letter + num);
        td.appendChild(btn);
        row.appendChild(td);
      }

      bingoTableBody.appendChild(row);
    });

    // Function to toggle the "called" state
    function toggleCalled(button, label) {
      button.classList.toggle('called');

      if (button.classList.contains('called')) {
        // If newly called, add to array
        lastCalledNumbers.push(label);
        // Keep only last 3
        if (lastCalledNumbers.length > 3) {
          lastCalledNumbers.shift();
        }
      } else {
        // If uncalled, remove from array
        lastCalledNumbers = lastCalledNumbers.filter(item => item !== label);
      }

      // Update display
      if (lastCalledNumbers.length === 0) {
        lastCalledDisplay.textContent = 'Last Called: None';
      } else {
        lastCalledDisplay.textContent = 'Last Called: ' + lastCalledNumbers.join(', ');
      }
    }
  </script>
</body>
</html>